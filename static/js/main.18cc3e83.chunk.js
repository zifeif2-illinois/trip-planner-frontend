(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){},206:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){},320:function(e,t,a){e.exports=a(596)},325:function(e,t,a){},401:function(e,t,a){},585:function(e,t,a){},586:function(e,t,a){},588:function(e,t,a){},589:function(e,t,a){},590:function(e,t,a){},591:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},594:function(e,t,a){},596:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(53),o=a.n(r),s=(a(325),a(15)),c=a(16),l=a(18),u=a(17),p=a(19),m=a(617),h=a(623),d=a(622),v=(a(205),a(35)),g=a(608),f=(a(206),a(615)),y=a(613),E=a(611),b=a(597),O=a(607),w=a(283),S=a.n(w),k=(a(399),S.a.initializeApp({apiKey:"AIzaSyA6GoLwhUzLcRguPqu8S2KLROMg67w4eT0",authDomain:"cs498rk-239014.firebaseapp.com",databaseURL:"https://cs498rk-239014.firebaseio.com",projectId:"cs498rk-239014",storageBucket:"cs498rk-239014.appspot.com",messagingSenderId:"1053708047986"}).auth());function j(){return k.currentUser}a(401);var C=a(189),A=a.n(C),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).hasLogin=function(){var e=j();a.setState({currentUser:Object(v.a)({},e,{name:e.getEmail()})})},a.logout=function(){k.signOut().then(function(){a.setState({currentUser:null}),a.props.history.push("/trip-planner")})},a.state={currentUser:j()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=j();e&&this.setState({currentUser:Object(v.a)({},e,{name:e.getEmail()})})}},{key:"render",value:function(){return i.a.createElement(f.a,{className:"navbar",fixed:"top"},i.a.createElement(f.a.Item,{link:!0,position:"left"}," ",i.a.createElement(O.a,{to:"/trip-planner"},"Trip Planner")),this.state.currentUser?i.a.createElement(f.a.Menu,{position:"right"},i.a.createElement(y.a,{text:"Hi, ".concat(this.state.currentUser.name),item:!0},i.a.createElement(y.a.Menu,null,i.a.createElement(y.a.Item,null,"My Trips"),i.a.createElement(y.a.Item,null,i.a.createElement(O.a,{to:"/trip-planner/profile"},"Profile")),i.a.createElement(y.a.Item,{onClick:this.logout},"Logout")))):null,this.state.currentUser?null:i.a.createElement(f.a.Item,{link:!0}," ",i.a.createElement(N,{status:"Login",hasLogin:this.hasLogin})," "),this.state.currentUser?null:i.a.createElement(f.a.Item,{link:!0}," ",i.a.createElement(N,{status:"Register",hasLogin:this.hasLogin})," "))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).login=function(){var e,t;(e=a.state.email,t=a.state.loginPassword,k.signInWithEmailAndPassword(e,t).then(function(e){return{user:e.user}}).catch(function(e){return console.log(e),{error:e.toString()}})).then(function(e){e.user?(a.setState({error:""}),a.props.hasLogin()):a.setState({error:e.error})})},a.register=function(){var e,t;(e=a.state.email,t=a.state.registerPassword,k.createUserWithEmailAndPassword(e,t).then(function(e){if(e.user)return{user:e.user}}).catch(function(e){return{user:null,error:e.toString()}})).then(function(e){e.user?(A.a.post("https://us-central1-cs498rk-239014.cloudfunctions.net/user/",{name:a.state.registerName,email:a.state.email}).then(function(e){console.log(e.data)}),a.setState({error:"",status:"Login"})):a.setState({error:e.error})})},a.state={status:e.status,email:"",loginPassword:"",registerPassword:"",registerName:"",error:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(E.a,{trigger:i.a.createElement("span",null,this.props.status),closeIcon:!0},i.a.createElement(E.a.Header,null,"Trip Planner -",this.state.status),i.a.createElement(E.a.Content,null,"Login"===this.state.status?i.a.createElement(E.a.Description,null,i.a.createElement("div",{className:"login-register-content"},i.a.createElement(g.a,{icon:"envelope",placeholder:"Email",type:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),i.a.createElement(g.a,{icon:"lock",placeholder:"Password",type:"password",value:this.state.loginPassword,onChange:function(t){return e.setState({loginPassword:t.target.value})}}),i.a.createElement(b.a,{className:"ui button green",onClick:this.login}," Login "),i.a.createElement("a",{className:"subButton",onClick:function(){return e.setState({status:"Register"})}}," Create an account "))):i.a.createElement(E.a.Description,null,i.a.createElement("div",{className:"login-register-content"},i.a.createElement(g.a,{icon:"user",placeholder:"Name",value:this.state.registerName,onChange:function(t){return e.setState({registerName:t.target.value})}}),i.a.createElement(g.a,{icon:"envelope",placeholder:"Email",type:"email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}),i.a.createElement(g.a,{icon:"lock",placeholder:"Password",type:"password",value:this.state.registerPassword,onChange:function(t){return e.setState({registerPassword:t.target.value})}}),i.a.createElement(b.a,{className:"ui button green",onClick:this.register}," Register "),i.a.createElement("a",{className:"subButton",onClick:function(){return e.setState({status:"Login"})}}," Already have an account? "))),i.a.createElement("span",{className:"error"}," ",this.state.error," ")))}}]),t}(n.Component),T=a(308),M=(a(584),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handlePlaceSelect=function(){var e=a.autocomplete.getPlace(),t=e.address_components;t&&a.props.onSelect(t[0].long_name,e.formatted_address,{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.autocomplete=new google.maps.places.Autocomplete(document.getElementById("city-search"),{types:["(cities)"]}),this.autocomplete.addListener("place_changed",this.handlePlaceSelect)}},{key:"render",value:function(){return i.a.createElement("div",{className:"city-search"},i.a.createElement(g.a,{id:"city-search",value:this.props.query,onChange:this.props.onChange,placeholder:"Destination",icon:"search",iconPosition:"left"}))}}]),t}(n.Component)),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeDestination=function(e){a.setState({destination:e.target.value})},a.changeDate=function(e){a.setState({startDate:e})},a.createTrip=function(){a.props.history.push("/trip-planner/create",Object(v.a)({},a.state))},a.setCitySearchResult=function(e,t,n){a.setState({city:e,cityQuery:t,cityLocation:n})},a.changeCitySearch=function(e){a.setState({cityQuery:e.target.value})},a.state={startDate:new Date,duration:0,city:"",cityQuery:"",cityLocation:{lat:41.8781,lng:-87.6298}},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"home-container"},i.a.createElement(D,{history:this.props.history}),i.a.createElement("div",{className:"bg"},i.a.createElement("div",{className:"ui card basic-info"},i.a.createElement("h3",null," Start planning your trip "),i.a.createElement(M,{onChange:this.changeCitySearch,onSelect:this.setCitySearchResult,query:this.state.cityQuery}),i.a.createElement("div",{className:"date-container"},i.a.createElement("h3",null," Start Date "),i.a.createElement(T.a,{className:"datepicker",selected:this.state.startDate,onChange:function(t){return e.changeDate(t)}})),i.a.createElement(g.a,{className:"duration",onChange:function(t){return e.setState({duration:t.target.value})},type:"number",label:"Duration",value:this.state.duration}),i.a.createElement("button",{className:"ui pink button",onClick:this.createTrip},"Let's go!"))))}}]),t}(n.Component),L=a(55),H=a(140),x=a(44),I=a(614),R=a(610),U=a(619);function _(e){return i.a.createElement(g.a,{onChange:e.onChange,placeholder:e.placeholder||"search...",value:e.value,action:{color:"teal",icon:"search",onClick:e.searchOnClick}})}a(139);var B=a(309),V=(a(281),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleEditView=function(){a.setState({isEditing:!a.state.isEditing})},a.deleteActivity=function(){a.props.deleteActivity(a.props.name)},a.state={name:"",location:"",isPopularActivity:!0,isEditing:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.setState({name:this.props.name,isPopularActivity:this.props.isPopularActivity})}},{key:"render",value:function(){var e=this;return this.props.formatted_address?i.a.createElement(I.a,{className:"activity-container"},i.a.createElement(I.a.Content,null,i.a.createElement(B.a,{floated:"right",size:"mini",src:this.props.icon}),i.a.createElement(I.a.Header,null,this.props.name),i.a.createElement(I.a.Meta,null,"Location: ",this.props.formatted_address),i.a.createElement("a",{className:"view-detail",href:this.props.url,target:"_blank"},"view detail"),i.a.createElement("a",{className:"delete-activity",onClick:this.deleteActivity},"delete"))):this.state.isEditing?i.a.createElement(I.a,{className:"activity-container"},i.a.createElement(I.a.Content,null,i.a.createElement(g.a,{placeholder:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),i.a.createElement(b.a,{onClick:this.toggleEditView},"Save"))):i.a.createElement(I.a,{className:"activity-container"},i.a.createElement(I.a.Content,null,i.a.createElement(I.a.Header,null,this.state.name),i.a.createElement(I.a.Meta,null,"Personal Activity"),i.a.createElement("a",{className:"edit-activity",onClick:this.toggleEditView},"edit"),i.a.createElement("a",{className:"delete-activity",onClick:this.deleteActivity},"delete")))}}]),t}(n.Component));function q(e){return i.a.createElement(b.a.Group,null,i.a.createElement(b.a,{color:e.selectOption1?"teal":null,onClick:e.onToggle},e.option1),i.a.createElement(b.a.Or,null),i.a.createElement(b.a,{color:e.selectOption1?null:"teal",onClick:e.onToggle},e.option2))}a(585);var W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).addCustomActicity=function(){a.setState({isSearchingPopular:!1}),a.props.addCustomActicity(a.state.customActivity)},a.state={isSearchingPopular:!0,searchAttraction:"",searchFood:"",isSearchingAttraction:!0,customActivity:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(I.a,{className:"new-activity-container",fluid:!0},i.a.createElement(I.a.Content,null,i.a.createElement(q,{option1:"Popular Activity",option2:"Personal Activity",selectOption1:this.state.isSearchingPopular,onToggle:function(){return e.setState({isSearchingPopular:!e.state.isSearchingPopular})}}),this.state.isSearchingPopular?i.a.createElement("div",{className:"search-bar"},this.state.isSearchingAttraction?i.a.createElement(_,{onChange:function(t){return e.setState({searchAttraction:t.target.value})},placeholder:"search activity...",value:this.state.searchAttraction,searchOnClick:function(){return e.props.searchThings(e.state.searchAttraction,"attraction")}}):i.a.createElement(_,{onChange:function(t){return e.setState({searchFood:t.target.value})},placeholder:"search food...",value:this.state.searchFood,searchOnClick:function(){return e.props.searchThings(e.state.searchFood,"food")}}),i.a.createElement(q,{option1:"Activity",option2:"Food",selectOption1:this.state.isSearchingAttraction,onToggle:function(){return e.setState({isSearchingAttraction:!e.state.isSearchingAttraction})}})):i.a.createElement(g.a,{className:"personal",onChange:function(t){return e.setState({customActivity:t.target.value})},value:this.state.customActivity,action:{color:"teal",icon:"check",onClick:this.addCustomActicity}}),i.a.createElement(b.a,{onClick:this.props.onCancel},"Cancel")))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).switchHotel=function(){a.setState({isSearchingHotel:!a.state.isSearchingHotel})},a.openAddActivityCard=function(){a.setState({isAddingNewActivity:!a.state.isAddingNewActivity})},a.searchThings=function(e,t){a.props.searchThings(e,t,a.props.index)},a.editHotel=function(){var e=Object(v.a)({},a.state.hotel);e.name="",a.setState({hotel:e,searchHotel:a.state.hotel.name})},a.setCustomHotel=function(){var e=a.state.customHotel;a.setState({hotel:{name:e}}),a.props.setHotel(e,a.props.index)},a.addCustomActicity=function(e){a.props.addCustomActicity(e,a.props.index)},a.deleteActivity=function(e){a.props.deleteActivity(e,a.props.index)},a.updateMap=function(){a.props.updateMap(a.props.index)},a.state={hotel:{},searchHotel:"",isSearchingHotel:!0,activities:a.props.activities,isAddingNewActivity:!1,customHotel:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.hotel.name!==this.props.hotel.name?this.setState({hotel:this.props.hotel}):this.props.activities.length!==e.activities.length&&this.setState({activities:this.props.activities})}},{key:"render",value:function(){var e=this,t=this.state.activities.map(function(t){return i.a.createElement(V,Object.assign({deleteActivity:e.deleteActivity,key:t.name},t))});return i.a.createElement(I.a,{className:"day-container"},i.a.createElement(I.a.Content,null,i.a.createElement(I.a.Header,null,"Day ",this.props.index+1),i.a.createElement(U.a.Content,null,i.a.createElement("div",{className:"hotel-container"},i.a.createElement(L.a,{name:"hotel"}),"Staying in",this.state.hotel.name?i.a.createElement("div",{className:"hotel-name"},i.a.createElement("span",null," ",this.state.hotel.name," "),this.state.hotel.url?i.a.createElement("a",{className:"edit-activity",href:this.state.hotel.url,target:"_blank"}," view detail "):null,i.a.createElement("a",{className:"edit-activity",onClick:this.editHotel},"edit")):i.a.createElement("div",{className:"hotel-value-container"},this.state.isSearchingHotel?i.a.createElement(_,{onChange:function(t){return e.setState({searchHotel:t.target.value})},placeholder:"popular hotel",value:this.state.searchHotel,searchOnClick:function(){return e.searchThings(e.state.searchHotel,"hotel")}}):i.a.createElement(g.a,{onChange:function(t){return e.setState({customHotel:t.target.value})},value:this.state.customHotel,action:{color:"teal",icon:"plus",onClick:this.setCustomHotel}}),i.a.createElement(q,{option1:"Popular",option2:"Personal",selectOption1:this.state.isSearchingHotel,onToggle:this.switchHotel})),i.a.createElement(b.a,{className:"map-button",icon:"map marker alternate",color:"teal",content:"View on map",onClick:this.updateMap})))),this.state.activities.length?i.a.createElement(I.a.Content,{extra:!0},t):null,i.a.createElement(I.a.Content,{extra:!0,className:"new-activity-button-container"},i.a.createElement(b.a,{basic:!0,color:"teal",onClick:this.openAddActivityCard},"Add New Activity"),this.state.isAddingNewActivity?i.a.createElement(W,{onCancel:function(){return e.setState({isAddingNewActivity:!1})},searchThings:this.searchThings,addCustomActicity:this.addCustomActicity}):null))}}]),t}(n.Component),K=a(612),Q=a(616),F=(a(586),a(98)),G=a.n(F),J=[{name:"Jack",email:"jacky@example.com"},{name:"Mary",email:"mary@example.com"},{name:"Amy",email:"amy@example.com"}],Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleResultSelect=function(e,t){var n=t.result,i=Object(x.a)(a.state.listOfUsers);if(i.map(function(e){return e.email}).includes(n.email))return a.setState({value:""});i.push(n),a.setState({listOfUsers:i}),a.resetComponent()},a.resetComponent=function(){return a.setState({isLoading:!1,matchedResult:[],value:""})},a.handleSearchChange=function(e,t){var n=t.value;console.log(a.state.results),a.setState({isLoading:!0,value:n}),setTimeout(function(){if(a.state.value.length<1)return a.resetComponent();var e=new RegExp(G.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,matchedResult:G.a.filter(a.state.results,function(t){return e.test(t.title)})})},300)},a.deselectUser=function(e){var t=a.state.listOfUsers;G.a.pull(t,e),a.setState({listOfUsers:t})},a.shareTrip=function(){},a.state={value:"",results:[],listOfUsers:[],matchedResult:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({results:J.map(function(e){return Object(v.a)({},e,{title:e.name,description:e.email})})})}},{key:"render",value:function(){var e=this,t=this.state.listOfUsers.map(function(t,a){return i.a.createElement(K.a.Item,{key:a},i.a.createElement(L.a,{name:"close",onClick:function(){return e.deselectUser(t)}}),i.a.createElement(K.a.Content,null,i.a.createElement(K.a.Header,null,t.name),i.a.createElement(K.a.Description,null,t.email)))});return i.a.createElement(E.a,{closeIcon:!0,trigger:this.props.trigger},i.a.createElement(E.a.Header,null,"Share Your Trip!"),i.a.createElement(E.a.Content,null,i.a.createElement(E.a.Description,null,i.a.createElement("div",{className:"search-bar"},i.a.createElement(Q.a,{onResultSelect:this.handleResultSelect,loading:this.state.isLoading,onSearchChange:G.a.debounce(this.handleSearchChange,500,{leading:!0}),value:this.state.value,results:this.state.matchedResult}),i.a.createElement(K.a,{divided:!0,className:"share-list"},t),i.a.createElement(b.a,{className:"ui button teal",onClick:this.shareTrip}," Share ")))))}}]),t}(n.Component),Z=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).attemptToSaveTrip=function(){j()?a.setState({openSaveModal:!0}):a.setState({openLoginModal:!0})},a.saveTrip=function(){var e=a.state.route.map(function(e,t){return{day:t,hotel:a.state.hotels[t],activities:e}}),t={name:a.state.name,description:a.state.description,routes:e};a.props.saveTrip(t)},a.setHotel=function(e,t){var n=a.state.hotels;n[t]={name:e,isPublicHotel:!1},a.setState({hotels:n})},a.addCustomActicity=function(e,t){var n=Object(x.a)(a.state.route);n[t].push({name:e,isPopularActivity:!1}),a.setState({route:n,isSaved:!1})},a.deleteActivity=function(e,t){var n=Object(x.a)(a.state.route);if(n[t]=n[t].filter(function(t){return t.name!==e}),t===a.state.mapDay){var i=a.refreshMarkers(n[t],a.state.hotels[t]);a.setState({route:n,isSaved:!1,markers:i})}else a.setState({route:n,isSaved:!1})},a.updateMap=function(e){var t=a.refreshMarkers(a.state.route[e],a.state.hotels[e]);a.setState({markers:t,mapDay:e}),a.props.openModal()},a.refreshMarkers=function(e,t){Object(x.a)(a.state.markers).forEach(function(e){e.setMap(null)});var n=e.filter(function(e){return e.geometry}).map(function(e){console.log(e.geometry.location);var t=new window.google.maps.Marker({position:e.geometry.location,map:a.props.map,title:e.name});return t.addListener("click",function(t){a.createInfoWindow(t,a.props.map,e)}),t});return t.geometry&&n.push(new window.google.maps.Marker({position:t.geometry.location,map:a.props.map,title:t.name})),n},a.handleTripAttrsChange=function(e,t){var n=t.name,i=t.value;return a.setState(Object(H.a)({},n,i))};var n=new Array(a.props.duration);n.fill({name:""});var i=new Array(a.props.duration).fill(null).map(function(e){return new Array(0)});return a.state={isSaved:!1,route:i,hotels:n,markers:[],mapDay:-1,openLoginModal:!1,openSaveModal:!1,name:"",description:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if((e.newAddedThing||this.props.newAddedThing)&&(!e.newAddedThing&&this.props.newAddedThing||e.newAddedThing.day!==this.props.newAddedThing.day||e.newAddedThing.id!==this.props.newAddedThing.id)){var t=this.props.newAddedThing;if("hotel"!==t.type){var a=Object(x.a)(this.state.route),n=t.thing,i=n.name,r=n.geometry,o=n.place_id,s=n.url,c={location:{lat:r.location.lat(),lng:r.location.lng()}};if(console.log(c),a[t.day].push({name:i,place_id:o,url:s,location:i,geometry:c,isPopularActivity:!0}),t.day===this.state.mapDay){var l=this.refreshMarkers(a[t.day],this.state.hotels[t.day]);this.setState({route:a,isSaved:!1,markers:l})}else this.setState({route:a,isSaved:!1})}else{var u=Object(x.a)(this.state.hotels),p=t.thing,m=p.place_id,h=p.name,d=p.url,v=p.geometry,g={location:{lat:v.location.lat(),lng:v.location.lng()}};u[t.day]={place_id:m,name:h,url:d,geometry:g,isPublicHotel:!0},this.setState({hotels:u,isSaved:!1})}}}},{key:"createInfoWindow",value:function(e,t,a){new window.google.maps.InfoWindow({content:a.name,position:{lat:e.latLng.lat(),lng:e.latLng.lng()}}).open(t)}},{key:"render",value:function(){var e=this,t=this.state.route.map(function(t,a){return i.a.createElement(z,{activities:t,key:a,index:a,hotel:e.state.hotels[a],searchThings:e.props.searchThings,setHotel:e.setHotel,addCustomActicity:e.addCustomActicity,deleteActivity:e.deleteActivity,updateMap:e.updateMap})});i.a.createElement(b.a,{content:"Share Your Trip",className:"share-button",color:"teal"});return i.a.createElement("div",{className:"route-planner-container"},i.a.createElement(I.a.Group,null,t),i.a.createElement("div",{className:"save-share-buttons"},i.a.createElement(b.a,{content:"Save",className:"save-button",onClick:this.attemptToSaveTrip,color:"teal"})),i.a.createElement(E.a,{open:this.state.openLoginModal,onClose:function(){return e.setState({openLoginModal:!1})},closeIcon:!0},i.a.createElement(E.a.Description,null,i.a.createElement("div",{className:"model-content"},"Login before you share!"))),i.a.createElement(E.a,{open:this.state.openSaveModal,onClose:function(){return e.setState({openSaveModal:!1})},closeIcon:!0},i.a.createElement(E.a.Description,null,i.a.createElement(R.a,{onSubmit:this.saveTrip},i.a.createElement(R.a.Input,{required:!0,fluid:!0,label:"Trip name",placeholder:"My Awesome Trip",onChange:this.handleTripAttrsChange,name:"name",value:this.state.name}),i.a.createElement(R.a.TextArea,{label:"Description",placeholder:"The trip with family...",onChange:this.handleTripAttrsChange,name:"description",value:this.state.description}),i.a.createElement(R.a.Button,{onClick:function(){return e.setState({openSaveModal:!1})}},"Cancel"),i.a.createElement(R.a.Button,null,"Submit")))))}}]),t}(n.Component),$=a(620),X=(a(588),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.searchResult)}},{key:"render",value:function(){var e=this;if(!this.props.searchResult.length)return i.a.createElement($.a,{placeholder:!0},i.a.createElement(U.a,{icon:!0},i.a.createElement(L.a,{name:"search"}),"The places searched from right panel will show up here"));var t=this.props.searchResult.map(function(t){return i.a.createElement(ee,{addToBoard:function(t){return e.props.addToBoard(t)},result:t,key:t.id,service:e.props.service})});return i.a.createElement("div",{className:"search-view-container"},i.a.createElement("h2",null,"Day ",this.props.day+1),i.a.createElement("h4",null,i.a.createElement("span",{className:"keywords"}," keywords: ",this.props.keyword),i.a.createElement("span",null," type: ",this.props.type," ")),t)}}]),t}(n.Component)),ee=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(I.a,{className:"search-result"},i.a.createElement(I.a.Content,null,this.props.result.photos?i.a.createElement(B.a,{floated:"right",size:"mini",src:this.props.result.photos[0].getUrl({maxWidth:400,maxHeight:400})}):i.a.createElement(L.a,{name:"image"}),i.a.createElement(I.a.Header,null,i.a.createElement("a",{href:this.props.result.url,target:"_blank"},this.props.result.name)),i.a.createElement(I.a.Meta,null,"Location: ",this.props.result.formatted_address),i.a.createElement(b.a,{color:"teal",onClick:function(){return e.props.addToBoard(e.props.result)}}," Add ")))}}]),t}(n.Component);a(589);var te=[{id:1,startDate:"2018-12-16T03:24:00",duration:3,routes:[{day:0,activities:[{name:"sleep",location:"union",isPopularActivity:!1,geometry:{location:{lat:40.119661,lng:-88.242426}}},{name:"walk",location:"quad",isPopularActivity:!0,geometry:{location:{lat:40.107677,lng:-88.22722}}}],hotel:{name:"home"}},{day:1,activities:[{name:"eat",location:"black dog",isPopularActivity:!0,geometry:{location:{lat:40.118222,lng:-88.240011}}},{name:"play frisbee",location:"japan house",isPopularActivity:!0,geometry:{location:{lat:40.09311,lng:-88.217941}}}],hotel:{name:"union"}}],owner:1,shared:[2,3],city:{name:"city",location:{lat:40.1164204,lng:-88.24338290000003}},description:"A trip with family and dogs and cats and birds and bananas!!!",name:"Thanksgiving Trip"},{id:2,startDate:"2019-12-16T03:24:00",duration:2,routes:[{day:0,activities:[{name:"sleep",location:"union",isPopularActivity:!1,geometry:{location:{lat:40.119661,lng:-88.242426}}},{name:"walk",location:"quad",isPopularActivity:!0,geometry:{location:{lat:40.107677,lng:-88.22722}}}],hotel:{name:"home"}},{day:1,activities:[{name:"eat",location:"black dog",isPopularActivity:!0,geometry:{location:{lat:40.118222,lng:-88.240011}}},{name:"play frisbee",location:"japan house",isPopularActivity:!0,geometry:{location:{lat:40.09311,lng:-88.217941}}}],hotel:{name:"union"}}],owner:1,shared:[2,3],city:{name:"city",location:{lat:40.1164204,lng:-88.24338290000003}},description:"A trip with family and dogs and cats and birds and bananas!!!",name:"Christmas Trip"},{id:3,startDate:"2016-12-06T03:24:00",duration:6,routes:[{day:0,activities:[{name:"sleep",location:"union",isPopularActivity:!1,geometry:{location:{lat:40.119661,lng:-88.242426}}},{name:"walk",location:"quad",isPopularActivity:!0,geometry:{location:{lat:40.107677,lng:-88.22722}}}],hotel:{name:"home"}},{day:1,activities:[{name:"eat",location:"black dog",isPopularActivity:!0,geometry:{location:{lat:40.118222,lng:-88.240011}}},{name:"play frisbee",location:"japan house",isPopularActivity:!0,geometry:{location:{lat:40.09311,lng:-88.217941}}}],hotel:{name:"union"}}],owner:1,shared:[2,3],city:{name:"city",location:{lat:40.1164204,lng:-88.24338290000003}},description:"A trip with family and dogs and cats and birds and bananas!!!",name:"December Trip"},{id:4,startDate:"2019-06-23T03:24:00",duration:8,routes:[{day:0,activities:[{name:"sleep",location:"union",isPopularActivity:!1,geometry:{location:{lat:40.119661,lng:-88.242426}}},{name:"walk",location:"quad",isPopularActivity:!0,geometry:{location:{lat:40.107677,lng:-88.22722}}}],hotel:{name:"home"}},{day:1,activities:[{name:"eat",location:"black dog",isPopularActivity:!0,geometry:{location:{lat:40.118222,lng:-88.240011}}},{name:"play frisbee",location:"japan house",isPopularActivity:!0,geometry:{location:{lat:40.09311,lng:-88.217941}}}],hotel:{name:"union"}}],owner:1,shared:[2,3],city:{name:"city",location:{lat:40.1164204,lng:-88.24338290000003}},description:"A trip with family and dogs and cats and birds and bananas!!!",name:"Winter Break Trip"}],ae=1;var ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).addToBoard=function(e){var t={day:a.state.day,thing:e,id:e.id,type:a.state.type};a.setState({newAddedThing:t})},a.searchThings=function(e,t,n){a.setState({day:n,type:t,searchKeyword:e});var i=a.state.city.toLowerCase(),r="";switch(r){case"hotel":r="lodging";break;case"food":r="food";break;default:r="point_of_interest"}var o={query:"".concat(i,"+").concat(e,"+").concat(t)};a.service.textSearch(o,function(e,t){t===google.maps.places.PlacesServiceStatus.OK&&a.setState({searchResult:e.map(function(e){return Object(v.a)({},e,{id:e.place_id,url:"https://www.google.com/maps/search/?api=1&query=".concat(e.formatted_address,"&query_place_id=").concat(e.place_id)})})})})},a.openModal=function(){a.setState({isModalOpen:!0})},a.saveTrip=function(e){var t;e=Object.assign(e,{startDate:a.props.startDate,duration:a.props.duration,city:{name:a.props.city,location:a.props.cityLocation},owner:ae,shared:[]}),(t=e,te.push(t),console.log(t),new Promise(function(e){e(te.length-1)})).then(function(e){a.props.jumpReview(e)})},a.state={searchKeyword:"",type:"",searchResult:[],day:null,newAddedThing:null,city:a.props.city,isModalOpen:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("map");this.map=new google.maps.Map(e,{center:this.props.cityLocation,zoom:10}),this.service=new google.maps.places.PlacesService(this.map);var t=document.getElementById("myModal");window.onclick=function(e){e.target===t&&this.state.setState({isModalOpen:!1})}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"create-trip-planner"},i.a.createElement(Z,{searchThings:this.searchThings,newAddedThing:this.state.newAddedThing,duration:this.props.duration,map:this.map,openModal:this.openModal,saveTrip:this.saveTrip}),i.a.createElement(X,{addToBoard:this.addToBoard,searchResult:this.state.searchResult,service:this.service,keyword:this.state.searchKeyword,day:this.state.day,type:this.state.type}),i.a.createElement("div",{className:"".concat(this.state.isModalOpen?"openModal":"closeModal"," map-modal")},i.a.createElement("div",{className:"modal-content"},i.a.createElement(L.a,{className:"close-btn",name:"close",onClick:function(){return e.setState({isModalOpen:!1})}}),i.a.createElement("div",{id:"map"}))))}}]),t}(n.Component),ie=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location.state.startDate||new Date,a=new Date(t),n=parseInt(this.props.location.state.duration)||3;return a.setDate(a.getDate()+n),i.a.createElement("div",{className:"container"},i.a.createElement(D,{history:this.props.history}),i.a.createElement("div",{className:"background"},i.a.createElement("div",{className:"title"},i.a.createElement("h2",null," ",this.props.location.state.cityQuery||"Chicago"," "),i.a.createElement("span",null," ","".concat(t.toDateString(),"-").concat(a.toDateString())," "))),i.a.createElement(ne,{startDate:t,duration:n,city:this.props.location.state.cityQuery||"Chicago",cityLocation:this.props.location.state.cityLocation,jumpReview:function(t){e.props.history.push("/trip-planner/review/".concat(t))}}))}}]),t}(n.Component),re=(a(590),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).deleteTrip=function(){a.props.onDeleteTrip()},a.state={location:"",date:"",description:"",isDeleting:!1,detailViewLink:"",name:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({location:this.props.city.name,startDate:this.props.startDate,description:this.props.description,isDeleting:this.props.isDeleting,detailViewLink:this.props.detailViewLink,name:this.props.name,duration:this.props.duration})}},{key:"componentDidUpdate",value:function(e){e!=this.props&&this.setState({location:this.props.city.name,startDate:this.props.startDate,description:this.props.description,isDeleting:this.props.isDeleting,detailViewLink:this.props.detailViewLink,name:this.props.name,duration:this.props.duration})}},{key:"render",value:function(){var e=new Date(Date.parse(this.state.startDate)),t=new Date(e.setDate(e.getDate()+this.state.duration));return i.a.createElement(I.a,{className:"trip-card-container",href:this.state.detailViewLink},i.a.createElement(I.a.Content,null,i.a.createElement(I.a.Header,null,this.state.location),i.a.createElement(I.a.Meta,null,"".concat(e.toLocaleDateString(),"-").concat(t.toLocaleDateString(),"\tDuration: ").concat(this.state.duration)),i.a.createElement(I.a.Description,null,this.state.description)),this.state.isDeleting?i.a.createElement(I.a.Content,{extra:!0},i.a.createElement(b.a,{onClick:this.deleteTrip,color:"red"},"Delete Trip")):null)}}]),t}(n.Component)),oe=(a(591),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).deleteTrip=function(e){var t=a.state.trips.filter(function(t){return t.id!=e});a.setState({trips:t})},a.state={detailViewType:a.props.detailViewType||"owner",ready:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.trips!=this.props.trips&&this.setState({trips:this.props.trips,ready:!0})}},{key:"render",value:function(){var e=this;if(this.state.ready){var t=this.state.trips.map(function(t){return i.a.createElement(re,Object.assign({key:t.id},t,{detailViewLink:"".concat("/trip-planner/review","/").concat(t.id),onDeleteTrip:function(){e.deleteTrip(t.id)}}))});return i.a.createElement(I.a.Group,null,t)}return i.a.createElement("div",null,"Loading...")}}]),t}(n.Component));oe.defaultProps={trips:[]};a(592);var se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).hasDatePast=function(e){var t=Date.now();return new Date(e)<t},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.trips.filter(function(t){return e.hasDatePast(t.startDate)}),a=this.props.trips.filter(function(t){return!e.hasDatePast(t.startDate)});return i.a.createElement("div",null,i.a.createElement("div",{className:"review-trip-list"},i.a.createElement(U.a,{as:"h2",content:"Upcoming Trips",className:"subheader"}),i.a.createElement(oe,{trips:t})),i.a.createElement("div",{className:"review-trip-list"},i.a.createElement(U.a,{as:"h2",content:"Past Trips",className:"subheader"}),i.a.createElement(oe,{trips:a,detailViewType:"other"})))}}]),t}(n.Component),ce=(a(282),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={trips:[],ready:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;new Promise(function(e){e(te)}).then(function(t){e.setState({trips:t,ready:!0})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"review-trip-body"},i.a.createElement(se,{trips:this.state.trips}))}}]),t}(n.Component)),le=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"review-trip-container"},i.a.createElement(D,null),i.a.createElement(ce,null))}}]),t}(n.Component),ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={name:"",location:"",isPopularActivity:!0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({name:this.props.name,location:this.props.location,isPopularActivity:this.props.isPopularActivity})}},{key:"render",value:function(){return i.a.createElement(I.a,{className:"activity-container"},i.a.createElement(I.a.Content,null,i.a.createElement(I.a.Header,null,this.props.name),i.a.createElement(I.a.Meta,null,this.props.location?"Location: ".concat(this.props.location):"Personal Activity")))}}]),t}(n.Component),pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={hotel:null,ready:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({activities:this.props.activities,hotel:this.props.hotel,ready:!0})}},{key:"render",value:function(){if(!this.state.ready)return i.a.createElement("div",null,"Loading...");console.log(this.state.activities);var e=this.state.activities.map(function(e){return i.a.createElement(ue,Object.assign({key:e.name},e))});return i.a.createElement(I.a,{className:"day-container"},i.a.createElement(I.a.Content,null,i.a.createElement(I.a.Header,null,"Day ",this.props.index+1),i.a.createElement(U.a.Content,null,i.a.createElement("div",{className:"hotel-container"},i.a.createElement(L.a,{name:"hotel"}),"Staying in",i.a.createElement("div",{className:"hotel-name"},i.a.createElement("span",null," ",this.state.hotel.name," "))))),this.state.activities.length?i.a.createElement(I.a.Content,{extra:!0},e):null)}}]),t}(n.Component),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).jumpEdit=function(){},a.openShare=function(){a.setState({openShareModal:!0})},a.state={ready:!1,openShareModal:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.trip;this.setState(Object(v.a)({},e,{ready:!0}))}},{key:"render",value:function(){var e=this;if(this.state.ready){var t=this.state.routes.map(function(e,t){return i.a.createElement(pe,{activities:e.activities,key:t,index:e.day,hotel:e.hotel})}),a=i.a.createElement(L.a,{className:"icon",name:"share square",color:"teal",size:"large"});return i.a.createElement("div",{className:"route-planner"},i.a.createElement("div",{className:"title"},i.a.createElement("h1",null," Route Details "),i.a.createElement("div",{className:"icon-group"},i.a.createElement(L.a,{className:"icon",name:"edit",color:"teal",size:"large",onClick:this.jumpEdit}),i.a.createElement(Y,{trigger:a}))),i.a.createElement("div",{className:"review-route-planner-container"},i.a.createElement(I.a.Group,null,t)),i.a.createElement(E.a,{open:this.state.openShareModal,onClose:function(){return e.setState({openShareModal:!1})},closeIcon:!0},i.a.createElement(E.a.Description,null,i.a.createElement("div",{className:"model-content"},"Login before you share!"))))}return i.a.createElement("div",null,"Loading...")}}]),t}(n.Component),he=a(609),de=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getListOfMarkers=function(e){return e.routes.map(function(e,t){return e.activities.map(function(e){var n=new window.google.maps.Marker({position:e.geometry.location,map:null,title:e.name,label:(t+1).toString()});return n.addListener("click",function(t){a.createInfoWindow(t,a.map,e)}),n})})},a.putMarkersOnMap=function(e){e.forEach(function(e){return e.setMap(a.map)})},a.createInfoWindow=function(e,t,a){new window.google.maps.InfoWindow({content:a.name,position:{lat:e.latLng.lat(),lng:e.latLng.lng()}}).open(t)},a.onChangeSelectedDay=function(e,t){console.log(t.value);var n=t.value,i=Object(x.a)(a.state.markers);n<0?i.forEach(function(e){e.forEach(function(e){return e.setMap(a.map)})}):i.forEach(function(e,t){t!==n?e.forEach(function(e){return e.setMap(null)}):e.forEach(function(e){return e.setMap(a.map)})}),a.setState({selectedDate:n,markers:i})},a.state={markers:[],trip:e.trip,selectedDate:-1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t=this.state.trip,a=document.getElementById("map");this.map=new google.maps.Map(a,{center:t.city.location,zoom:10}),this.service=new google.maps.places.PlacesService(this.map);var n=this.getListOfMarkers(t);this.setState({markers:n});var i=(e=[]).concat.apply(e,Object(x.a)(n));this.putMarkersOnMap(i)}},{key:"render",value:function(){var e,t=[{key:"all",text:"All dates",value:-1}];for(e=0;e<this.state.trip.routes.length;e++){var a=e+1;t.push({key:"".concat(e),text:"Day ".concat(a),value:e})}return i.a.createElement("div",{className:"trip-detail-body"},i.a.createElement(me,{className:"trip-detail-component",trip:this.state.trip}),i.a.createElement(he.a,{vertical:!0}),i.a.createElement("div",{className:"map-container"},i.a.createElement("div",{id:"map"}),i.a.createElement("span",{id:"dropdown-label"}," View places to visit on "),i.a.createElement(y.a,{placeholder:"Select a Special Day",options:t,defaultValue:t[0].value,onChange:this.onChangeSelectedDay})))}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={ready:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=this.props.match.params.id;(e=a,new Promise(function(t){t(te[e])})).then(function(e){t.setState({trip:e,ready:!0})})}},{key:"render",value:function(){if(this.state.ready){var e=this.state.trip,t=new Date(Date.parse(e.startDate)),a=new Date(t.setDate(t.getDate()+e.duration));return i.a.createElement("div",{className:"container"},i.a.createElement(D,null),i.a.createElement("div",{className:"background"},i.a.createElement("div",{className:"title"},i.a.createElement("h2",null," ",e.name," "),i.a.createElement("span",null," ","".concat(t.toLocaleDateString(),"-").concat(a.toLocaleDateString())," "),i.a.createElement("span",null," ","".concat(e.city.name)),i.a.createElement("h6",null,i.a.createElement("i",null,e.description)))),i.a.createElement(de,{trip:this.state.trip}))}return i.a.createElement("div",null," Loading... ")}}]),t}(n.Component),ge=(a(593),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleEdit=function(){a.setState({isEditing:!a.state.isEditing})},a.onNameChange=function(e){a.setState({editName:e.target.value})},a.resetPassword=function(){var e;(e=a.props.email,k.sendPasswordResetEmail(e)).then(function(e){alert("An email has been sent to "+a.state.email)})},a.state={editName:"",isEditing:!1,email:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=j();if(!e)return this.props.history.push("/trip-planner");this.setState({editName:"Zifei",email:e.email})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(D,{history:this.props.history}),i.a.createElement("div",{className:"profile-container"},i.a.createElement(U.a,null," Profile "),i.a.createElement("div",null,"Name"),i.a.createElement(g.a,{value:this.state.editName,disabled:!this.state.isEditing,onChange:this.onNameChange,action:{color:"teal",icon:this.state.isEditing?"check":"pencil",onClick:this.toggleEdit}}),i.a.createElement("div",null," Email "),i.a.createElement(g.a,{value:this.state.email,disabled:!0}),i.a.createElement(b.a,{onClick:this.resetPassword,color:"teal"},"Reset Password")))}}]),t}(n.Component)),fe=(a(594),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(m.a,null,i.a.createElement(h.a,null,i.a.createElement(d.a,{exact:!0,path:"/",component:P}),i.a.createElement(d.a,{exact:!0,path:"/trip-planner/create",component:ie}),i.a.createElement(d.a,{exact:!0,path:"/trip-planner/review",component:le}),i.a.createElement(d.a,{exact:!0,path:"/trip-planner/review/:id",component:ve}),i.a.createElement(d.a,{exact:!0,path:"/trip-planner/profile",component:ge})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[320,1,2]]]);
//# sourceMappingURL=main.18cc3e83.chunk.js.map